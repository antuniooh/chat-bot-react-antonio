{"ast":null,"code":"// Import types\nimport { INPUT_SUCCESS, INPUT_FAIL, SESSION_SUCCESS, SESSION_FAIL, MESSAGE_SUCCESS, MESSAGE_FAIL } from \"./types\"; //  Import axios\n\nimport axios from \"axios\"; //  Function that handles  users message\n\nexport const userMessage = message => async dispatch => {\n  try {\n    dispatch({\n      type: INPUT_SUCCESS,\n      payload: message\n    });\n  } catch (err) {\n    dispatch({\n      type: INPUT_FAIL\n    });\n  }\n}; //  Creates a session - API CALL\n\nexport const createSession = () => async dispatch => {\n  try {\n    const res = await axios.get(\"https://server-chatbot-antonio.herokuapp.com/api/watson/session\").then(function (response) {\n      console.log(response);\n      axios.defaults.headers.common[\"session_id\"] = response.data['session_id'];\n    }).catch(function (error) {\n      console.log(error);\n    });\n    dispatch({\n      type: SESSION_SUCCESS,\n      payload: res.data\n    });\n  } catch (err) {\n    dispatch({\n      type: SESSION_FAIL\n    });\n  }\n}; //  Sends the message to the bot - API CALL\n\nexport const sendMessage = message => async dispatch => {\n  try {\n    const body = {\n      input: message\n    };\n    const res = await axios.post(\"https://server-chatbot-antonio.herokuapp.com/api/watson/message\", body);\n    dispatch({\n      type: MESSAGE_SUCCESS,\n      payload: res.data.output.generic[0].text\n    });\n  } catch (err) {\n    dispatch({\n      type: MESSAGE_FAIL\n    });\n  }\n};","map":{"version":3,"sources":["/home/antonio/chatbot-antonio/src/actions/watson.js"],"names":["INPUT_SUCCESS","INPUT_FAIL","SESSION_SUCCESS","SESSION_FAIL","MESSAGE_SUCCESS","MESSAGE_FAIL","axios","userMessage","message","dispatch","type","payload","err","createSession","res","get","then","response","console","log","defaults","headers","common","data","catch","error","sendMessage","body","input","post","output","generic","text"],"mappings":"AAAA;AACA,SACEA,aADF,EAEEC,UAFF,EAGEC,eAHF,EAIEC,YAJF,EAKEC,eALF,EAMEC,YANF,QAOO,SAPP,C,CASA;;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CAEA;;AACA,OAAO,MAAMC,WAAW,GAAIC,OAAD,IAAa,MAAOC,QAAP,IAAoB;AAC1D,MAAI;AACFA,IAAAA,QAAQ,CAAC;AAAEC,MAAAA,IAAI,EAAEV,aAAR;AAAuBW,MAAAA,OAAO,EAAEH;AAAhC,KAAD,CAAR;AACD,GAFD,CAEE,OAAOI,GAAP,EAAY;AACZH,IAAAA,QAAQ,CAAC;AAAEC,MAAAA,IAAI,EAAET;AAAR,KAAD,CAAR;AACD;AACF,CANM,C,CAQP;;AACA,OAAO,MAAMY,aAAa,GAAG,MAAM,MAAOJ,QAAP,IAAoB;AACrD,MAAI;AACF,UAAMK,GAAG,GAAG,MAAMR,KAAK,CAACS,GAAN,CAAU,iEAAV,EACjBC,IADiB,CACZ,UAAUC,QAAV,EAAoB;AACxBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACAX,MAAAA,KAAK,CAACc,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,YAA9B,IAA8CL,QAAQ,CAACM,IAAT,CAAc,YAAd,CAA9C;AACH,KAJmB,EAKnBC,KALmB,CAKb,UAAUC,KAAV,EAAiB;AACpBP,MAAAA,OAAO,CAACC,GAAR,CAAYM,KAAZ;AACH,KAPmB,CAAlB;AAQAhB,IAAAA,QAAQ,CAAC;AAAEC,MAAAA,IAAI,EAAER,eAAR;AAAyBS,MAAAA,OAAO,EAAEG,GAAG,CAACS;AAAtC,KAAD,CAAR;AACD,GAVD,CAUE,OAAOX,GAAP,EAAY;AACZH,IAAAA,QAAQ,CAAC;AAAEC,MAAAA,IAAI,EAAEP;AAAR,KAAD,CAAR;AACD;AACF,CAdM,C,CAgBP;;AACA,OAAO,MAAMuB,WAAW,GAAIlB,OAAD,IAAa,MAAOC,QAAP,IAAoB;AAC1D,MAAI;AACF,UAAMkB,IAAI,GAAG;AAAEC,MAAAA,KAAK,EAAEpB;AAAT,KAAb;AACA,UAAMM,GAAG,GAAG,MAAMR,KAAK,CAACuB,IAAN,CAAW,iEAAX,EAA8EF,IAA9E,CAAlB;AAEAlB,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAEN,eADC;AAEPO,MAAAA,OAAO,EAAEG,GAAG,CAACS,IAAJ,CAASO,MAAT,CAAgBC,OAAhB,CAAwB,CAAxB,EAA2BC;AAF7B,KAAD,CAAR;AAID,GARD,CAQE,OAAOpB,GAAP,EAAY;AACZH,IAAAA,QAAQ,CAAC;AAAEC,MAAAA,IAAI,EAAEL;AAAR,KAAD,CAAR;AACD;AACF,CAZM","sourcesContent":["// Import types\nimport {\n  INPUT_SUCCESS,\n  INPUT_FAIL,\n  SESSION_SUCCESS,\n  SESSION_FAIL,\n  MESSAGE_SUCCESS,\n  MESSAGE_FAIL,\n} from \"./types\";\n\n//  Import axios\nimport axios from \"axios\";\n\n//  Function that handles  users message\nexport const userMessage = (message) => async (dispatch) => {\n  try {\n    dispatch({ type: INPUT_SUCCESS, payload: message });\n  } catch (err) {\n    dispatch({ type: INPUT_FAIL });\n  }\n};\n\n//  Creates a session - API CALL\nexport const createSession = () => async (dispatch) => {\n  try {\n    const res = await axios.get(\"https://server-chatbot-antonio.herokuapp.com/api/watson/session\")\n    .then(function (response) {\n      console.log(response);\n      axios.defaults.headers.common[\"session_id\"] = response.data['session_id'];\n  })\n  .catch(function (error) {\n      console.log(error);\n  });\n    dispatch({ type: SESSION_SUCCESS, payload: res.data });\n  } catch (err) {\n    dispatch({ type: SESSION_FAIL });\n  }\n};\n\n//  Sends the message to the bot - API CALL\nexport const sendMessage = (message) => async (dispatch) => {\n  try {\n    const body = { input: message };\n    const res = await axios.post(\"https://server-chatbot-antonio.herokuapp.com/api/watson/message\", body)\n \n    dispatch({\n      type: MESSAGE_SUCCESS,\n      payload: res.data.output.generic[0].text,\n    });\n  } catch (err) {\n    dispatch({ type: MESSAGE_FAIL });\n  }\n};\n"]},"metadata":{},"sourceType":"module"}